// Copyright lovebear https://github.com/lovebear/intercept.js
'use strict';
var intercept;(function(){var t={};t._find_context=function(t,n,e){for(var r=Object.keys(t),o=0,i=r.length;i>o;o++){var c=t[r[o]];if(c&&c===n)return[t,r[o]]}if(0===e)throw Error("Unable to find context");return this._find_context(t,n,e-1)},t.set=function(n,e,r){var o=!1;n||(n=t._default_context);var i=this._find_context(n,e,this._context_level);if(i){var c=i[0][i[1]];i[0][i[1]]=function(){var n=r.apply(i[0],Array.prototype.slice.call(arguments));if(n&&!(n instanceof t.Stop)){n=Array.prototype.slice.call(n);var e=c.apply(i[0],n);if(e)return e}},i[0][i[1]].skip=c,i[0][i[1]].skip._context=i[0],o=!0}if(!o)throw Error("Could not set proxy")},t.unset=function(t){var n=!1,e=t.skip;if(t.skip&&t.skip._context){var r=this._find_context(t.skip._context,t,this._context_level);r&&(e._context&&delete e._context,r[0][r[1]]=e,n=!0)}if(!n)throw Error("Could not unset proxy")},t.Stop=function(){},intercept=function(n,e,r){var o=!1,i=t._find_context(n,e,0);return t.set(n,e,function(){return o={called:!0,args:Array.prototype.slice.call(arguments)},r&&"function"==typeof r&&r(o),t.unset(i[0][i[1]]),new t.Stop}),function(){return o}}})();