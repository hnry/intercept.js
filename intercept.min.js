// Copyright lovebear https://github.com/lovebear/intercept.js
'use strict';
var intercept;(function(){var t={};t._find_context=function(t,n){for(var r=Object.keys(t),e=0,o=r.length;o>e;e++){var i=t[r[e]];if(i&&i===n)return[t,r[e]]}throw Error("Unable to find context")},t.set=function(n,r,e){var o=!1;n||(n=t._default_context);var i=this._find_context(n,r,this._context_level);if(i){var c=i[0][i[1]];i[0][i[1]]=function(){var n=e.apply(i[0],Array.prototype.slice.call(arguments));if(!(n&&n instanceof t.Stop)){var r;if(n?Array.isArray(n)?(n=Array.prototype.slice.call(n),r=c.apply(i[0],n)):r=c.call(i[0],n):r=c.call(i[0]),r)return r}},i[0][i[1]].skip=c,i[0][i[1]].skip._context=i[0],o=!0}if(!o)throw Error("Could not set proxy")},t.unset=function(t){var n=!1,r=t.skip;if(t.skip&&t.skip._context){var e=this._find_context(t.skip._context,t,this._context_level);e&&(r._context&&delete r._context,e[0][e[1]]=r,n=!0)}if(!n)throw Error("Could not unset proxy")},t.Stop=function(){},intercept=function(n,r,e){var o=!1,i=t._find_context(n,r,0);return t.set(n,r,function(){return o={called:!0,args:Array.prototype.slice.call(arguments)},e&&"function"==typeof e&&e(o),t.unset(i[0][i[1]]),new t.Stop}),function(){return o}}})();