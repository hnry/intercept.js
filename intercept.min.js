// Copyright lovebear https://github.com/lovebear/intercept.js
'use strict';
var intercept;(function(){var t={};t._find_context=function(t,n){for(var e=Object.keys(t),r=0,o=e.length;o>r;r++){var c=t[e[r]];if(c&&c===n)return[t,e[r]]}throw Error("Unable to find context")},t._call=function(t,n,e){var r,o=e&&e.length||0;switch(o){case 0:r=n.call(t);break;case 1:r=n.call(t,e[0]);break;case 2:r=n.call(t,e[0],e[1]);break;case 3:r=n.call(t,e[0],e[1],e[2]);break;default:r=n.apply(t,e)}return r},t.set=function(n,e,r){var o=!1;n||(n=t._default_context);var c=this._find_context(n,e,this._context_level);if(c){var a=c[0][c[1]];c[0][c[1]]=function(){var n=t._call(c[0],r,arguments);if(!(n&&n instanceof t.Stop)){var e;if(!Array.isArray(n)&&n&&(n=[n]),e=t._call(c[0],a,n))return e}},c[0][c[1]].skip=a,c[0][c[1]].skip._context=c[0],o=!0}if(!o)throw Error("Could not set proxy")},t.unset=function(t){var n=!1,e=t.skip;if(t.skip&&t.skip._context){var r=this._find_context(t.skip._context,t,this._context_level);r&&(e._context&&delete e._context,r[0][r[1]]=e,n=!0)}if(!n)throw Error("Could not unset proxy")},t.Stop=function(){},intercept=function(n,e,r){var o=!1,c=t._find_context(n,e,0);return t.set(n,e,function(){return o={called:!0,args:Array.prototype.slice.call(arguments)},r&&"function"==typeof r&&r(o),t.unset(c[0][c[1]]),new t.Stop}),function(){return o}}})();